# 3.3.1 Раскадровка – убери игрушки

Первый шаг в нашем процессе после «начать уборку» - это «поиск игрушек». Этот кадр раскадровки - то, что видит робот, когда ему приказано начать уборку. Он видит комнату, в которой видны три вида объектов: игрушки, вещи, которые не являются игрушками \(зеленый пуф и красный камин\), а также сама комната, стены и пол:

![](.gitbook/assets/image%20%2812%29.png)

Мы могли бы выбрать любой тип датчика для обнаружения наших игрушек и управления нашим роботом. Мы могли бы иметь лидар, или тепловой сканер, или сонар. Давайте предположим, что лучший сенсорный инструмент для этой задачи - обычная USB-камера. У нас есть контроль над освещением, игрушки не особо отличаются температурой от других вещей в комнате, и нам нужно достаточно информации для идентификации объектов по типу. Нам нужно видео. Позже мы подумаем, чтобы точно определить, какая камера нам нужна, поэтому добавьте это в наш список дел.

Наша следующая раскадровка - искать игрушки:

![](.gitbook/assets/image%20%2810%29.png)

Нам нужно запустить какой-то алгоритм или технику для классификации объектов по типу. Результат этого алгоритма состоит в том, чтобы найти объекты - отделить их от фона пола - и затем классифицировать каждый объект как игрушку или не игрушку. Нам на самом деле все равно, если у нас будет больше типов предметов - мы оставляем все не игрушечные объекты в покое и подбираем все игрушечные объекты. Обратите внимание, что мы рисуем круги вокруг предметов, которые являются игрушками, это еще один способ сказать, что мы должны найти их в кадре камеры. Так что эта простая картина говорит нам, чего мы не знали раньше? Это говорит нам о том, что: • Нам нужно сегментировать изображение камеры по объектам • Нам нужно найти объекты в кадре камеры • Нам нужно классифицировать объекты как игрушки или не игрушки • Нам нужно уметь хранить и запоминать эту информацию Мы действительно можем взять и переместить только одну игрушку за раз - у нас есть только одна рука, и никто , что в случаях использования нам нужно брать больше одной за раз. Таким образом, мы имеем дело только с одной игрушкой – и, например, скажем, что она самая близкая к роботу:

![](.gitbook/assets/image%20%288%29.png)



Можно также сказать, что к этой игрушке проще всего добраться, что может немного отличаться от выбора ближайшей. Мы поставили эту игрушку в качестве цели для нашего следующего действия, а какой?

Если бы вы сказали ехать к игрушке, вы были бы правы. Однако мы должны не просто подъехать к игрушке, но и поставить игрушку в такое положение, чтобы рука робота могла к ней добраться. Кстати, это означает, что рука робота должна быть в состоянии достигать земли или опускаться очень близко к земле, поскольку у нас есть небольшие игрушки:

![](.gitbook/assets/image%20%2815%29.png)

Наш робот должен спланировать маршрут от своего текущего положения до места, где он может попытаться поднять игрушку. Мы установили цель подъехать на расстояние вытянутой руки от центра игрушки:

![](.gitbook/assets/image%20%284%29.png)



Робот должен убедиться, что на пути нет препятствий. Есть два способа сделать это. Как показано на рисунке, вы можете очистить путь, по которому идет робот, убрать препятствия с пути, ширина которого соответствует ширине робота \(плюс немного лишнего\) и посмотреть, есть ли какие-либо препятствия в этой области. Также мы можем добавить границу вокруг препятствий и посмотреть, проходит ли путь между этими границами. В любом случае, у нас должен быть путь, свободный от препятствий:

![](.gitbook/assets/image%20%2818%29.png)



Робот определяет для себя правильное положение, чтобы подготовиться подобрать игрушку.

Теперь, когда робот завершил свой ход, он может переместить руку в такое положение, чтобы можно было забрать игрушку. Нам нужно положить руку робота над центром массы игрушки, а затем повернуть руку так, чтобы она соответствовала узкой части игрушки, чтобы мы могли ее поднять. Одна из наших целей этого проекта - не диктовать, как роботу делать это, а позволить ему самостоятельно учиться. Таким образом, мы можем сказать для этой группы раскадровки, что робот использует свое обучение и машинное обучение, чтобы использовать подходящую позу руки для подготовки к захвату объекта. Мы можем предположить, что это включает в себя подкладку руки вверх:

![](.gitbook/assets/image%20%285%29.png)

Вероятно, шаг 6 является сложной частью, а на шаге 7 робот завершает захват объекта и поднимает его. Робот должен быть в состоянии определить, был ли подбор успешным, если нет, попробует снова. Это было в нашей диаграмме состояний, которую мы делали раньше. Мы сейчас подобрали игрушку. Что дальше? Найди ящик для игрушек!

![](.gitbook/assets/image%20%2816%29.png)

Теперь нам нужно, чтобы робот нашёл ящик для игрушек. Опять же, нам все равно на данный момент, как он это сделает. Мы все еще беспокоимся о том, «что», а не «как». Каким-то образом робот оглядывается и находит ящик для игрушек, который в этом случае большой, напротив стены и имеет характерный цвет. Независимо от этого, робот должен найти ящик для игрушек самостоятельно. Надписи на рисунке указывают на то, что робот может различить ящик для игрушек и рассматривает все другие объекты, которые он воспринимает как препятствия. Мы видим, что нам не нужно одновременно активировать функцию «игрушка / не игрушка», только процесс принятия решения «коробка с игрушкой / не игрушка». Это облегчает некоторые процессы обработки и упрощает машинное обучение:

![](.gitbook/assets/image%20%286%29.png)

Теперь, когда мы нашли коробку для игрушек, мы иллюстрируем немного более сложную задачу перемещения вокруг препятствий, чтобы добраться туда. В этом примере мы показываем фиолетовый контур основания робота относительно красного контура вокруг препятствия, который я обозначил как “Запретная зона”. Это дает нам больше подсказок о том, как избежать препятствий. Мы хотим держать центр робота за пределами запретной зоны. Нам нужно подойти достаточно близко к коробке с игрушкой, чтобы положить нашу игрушку:

![](.gitbook/assets/image%20%283%29.png)

В раскадровке 10 мы поднимаем игрушку высоко над верхом ящика для игрушек и помещаем нашу игрушку так, чтобы она упала внутрь ящика для игрушек, когда мы ее отпускаем. Запомните, что мы должны поднять игрушку до последних нескольких дюймов к коробке с игрушками. Мы помещаем руку робота поверх отверстия ящика для игрушек, как можно дальше вперед и в середину ящика для игрушек.

![](.gitbook/assets/image%20%2811%29.png)

Наш последний шаг в игрушечной саге - открыть руку робота и позволить игрушке упасть в ящик для игрушек. Я предполагаю, что нам придется потратить некоторое время на метод проб и ошибок, отлаживая это. Возможно, нам придется наклонить открытую руку вправо и влево, чтобы игрушка упала. Если игрушка выпадает из коробки, то она не убрана, и мы должны начать все сначала и попытаться убрать ее снова. Нам не нужно новое состояние для этого, потому что оно снова становится игрушкой на полу, и у нас уже есть состояние для этого.

Я надеюсь, что вы видели в процессе раскадровки, как это дает представление о визуализации задач робота. Я бы сказал, что более важным преимуществом является то, что оно заставляет вас думать о том, что делает робот, и разбивать каждый шаг на все более мелкие части. Не стесняйтесь взять эту раскадровку и разбить отдельную панель на собственную раскадровку, если это то, что, по вашему мнению, нужно сделать.

